{"version":3,"sources":["Login.js","util/utils.js","Player.js","hooks/useFetch.js","Loader.js","pages/playlist/AddToPlaylistDialog.js","TrackSearchResult.js","layout/Drawer.js","pages/playlist/Playlist.js","pages/playlist/MyPlaylists.js","pages/songs/Genres.js","pages/songs/Songs.js","pages/songs/GenreDetails.js","pages/playlist/PlaylistDetails.js","pages/charts/Charts.js","pages/charts/Chart.js","pages/Home.js","Dashboard.js","hooks/useAuth.js","pages/SignIn.js","App.js","hooks/useLoggedIn.js","index.js"],"names":["Login","Container","className","style","minHeight","href","BACKEND_URL","createUrl","path","createSpotifyApiUrl","fetch","url","a","obj","method","token","getToken","headers","settings","body","JSON","stringify","window","then","res","json","showMsg","user","localStorage","getItem","parse","getUser","saveAuth","setItem","resp","success","message","msg","Stack","position","top","right","zIndex","spacing","Alert","severity","document","dispatchEvent","CustomEvent","detail","Player","accessToken","trackUri","useState","play","setPlay","requestInProgress","setRequestInProgress","useEffect","callback","state","isPlaying","toFixed","track","finally","uris","useFetch","endpoint","dependencies","loading","setLoading","error","setError","value","setValue","callbackMemoized","useCallback","undefined","catch","loaderCss","css","Loader","size","ToggleBtn","playlist","React","selected","setSelected","ListItem","ToggleButton","onClick","select","playlistId","id","width","ListItemAvatar","Avatar","name","charAt","toUpperCase","ListItemText","primary","SimpleDialog","props","onClose","selectedValue","open","Dialog","DialogTitle","List","sx","pt","playlists","map","i","AddToPlaylistDialog","setOpen","setSelectedValue","IconButton","TrackSearchResult","chooseTrack","cursor","song","src","albumUrl","height","alt","title","artist","SidebarDrawer","children","Box","display","CssBaseline","AppBar","theme","drawer","Toolbar","to","Typography","variant","noWrap","component","Drawer","flexShrink","boxSizing","overflow","ListItemIcon","firstName","lastName","Divider","button","paddingTop","paddingLeft","flexGrow","p","child","Playlist","removePlaylist","created","history","useHistory","Card","maxWidth","push","CardHeader","avatar","bgcolor","red","aria-label","subheader","Date","toLocaleDateString","CardActions","disableSpacing","NewPlaylist","addPlaylist","saveNewPlaylist","e","preventDefault","form","currentTarget","querySelector","response","DialogContent","onSubmit","TextField","margin","required","fullWidth","label","autoFocus","Button","type","MyPlaylists","filter","length","index","Fab","color","bottom","Genre","genre","backgroundColor","Math","random","alignContent","alignItems","justifyContent","marginBottom","fontSize","Genres","genres","Songs","setGenres","spotifyApi","getAvailableGenreSeeds","data","GenreDetails","tracks","setTracks","useParams","searchTracks","items","smallestAlbumImage","album","images","reduce","smallest","image","artists","uri","playTrack","PlaylistDetails","songs","blockStyle","padding","textStyle","transform","Charts","Chart","chart","Home","align","gutterBottom","paragraph","Grid","container","item","SpotifyWebApi","clientId","Dashboard","code","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","pushState","location","interval","setInterval","clearInterval","useAuth","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","setMessage","addEventListener","setTimeout","cancel","Form","Control","placeholder","onChange","target","createTheme","Fields","isSignIn","setIsSignIn","setIsLogged","isLogged","handleSubmit","event","FormData","email","get","password","URL","mt","autoComplete","mb","Link","SignIn","ThemeProvider","marginTop","flexDirection","m","URLSearchParams","App","isLoading","loggedIn","setIsLoading","setSuccess","authenticated","useLoggedIn","removeItem","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0b8b0bc2.chunk.js","sourcesContent":["import React from \"react\"\nimport { Container } from \"react-bootstrap\"\n\nconst AUTH_URL =\n  \"https://accounts.spotify.com/authorize?client_id=2736f0fba5bd47febe645ba84dc7fa05&response_type=code&redirect_uri=https://77.78.32.18:4000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\"\n\nexport default function Login() {\n  return (\n    <Container\n      className=\"d-flex justify-content-center align-items-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <a className=\"btn btn-success btn-lg\" href={AUTH_URL}>\n        Login With Spotify\n      </a>\n    </Container>\n  )\n}\n","import Alert from \"@mui/material/Alert\";\r\nimport Stack from \"@mui/material/Stack\";\r\n\r\nexport const BACKEND_URL = \"https://77.78.32.18:4000\";\r\n\r\nexport const createUrl = (path = \"\") => {\r\n  return `${BACKEND_URL}/${path}`;\r\n};\r\n\r\nexport const createSpotifyApiUrl = (path) => {\r\n  return `${BACKEND_URL}/spotifyapi/${path}`;\r\n};\r\n\r\nexport const fetch = async (url, obj = {}, method = 'GET') => {\r\n  const token = getToken();\r\n  const headers = { 'Content-Type': 'application/json' };\r\n  if (token) headers['x-access-token'] = token;\r\n\r\n  const settings = { method, headers };\r\n  if (method === 'POST') settings.body = JSON.stringify(obj);\r\n\r\n  const json = await window.fetch(url, settings).then((res) => res.json());\r\n  showMsg(json);\r\n\r\n  return json;\r\n};\r\n\r\nexport const getToken = () => {\r\n  const user = window.localStorage.getItem('auth');\r\n  if (!user) return '';\r\n\r\n  return JSON.parse(user).token;\r\n};\r\n\r\nexport const getUser = () => {\r\n  const user = window.localStorage.getItem('auth');\r\n  if (!user) return {};\r\n\r\n  return JSON.parse(user);\r\n};\r\n\r\nexport const saveAuth = (obj) => {\r\n  window.localStorage.setItem('auth', JSON.stringify(obj));\r\n};\r\n\r\nexport const logout = () => window.localStorage.removeItem('auth');\r\n\r\nexport const showMsg = (resp) => {\r\n  if (!resp || (resp.success && !resp.message)) return;\r\n\r\n  const msg = (\r\n    <Stack style={{ position: 'fixed', top: 40, right: 25, zIndex: 999999999 }} spacing={2}>\r\n      <Alert severity={resp?.success ? 'success' : 'error'}>{resp?.message || 'Unknown Action, probably an error'}</Alert>\r\n    </Stack>\r\n  );\r\n\r\n  document.dispatchEvent(new CustomEvent('show-message', { detail: { msg }}));\r\n};\r\n","import { useState, useEffect } from \"react\"\r\nimport SpotifyPlayer from \"react-spotify-web-playback\"\r\nimport { createUrl, fetch } from \"./util/utils\"\r\n\r\nexport default function Player({ accessToken, trackUri }) {\r\n  const [play, setPlay] = useState(false)\r\n  const [requestInProgress, setRequestInProgress] = useState(false);\r\n\r\n  useEffect(() => setPlay(true), [trackUri])\r\n\r\n  if (!accessToken) return null\r\n  return (\r\n    <SpotifyPlayer\r\n      token={accessToken}\r\n      callback={state => {\r\n        if (!state.isPlaying) setPlay(false)\r\n        if (state.position.toFixed(2) === '0.00' && state.isPlaying && !requestInProgress) {\r\n          setRequestInProgress(true);\r\n          fetch(createUrl('chart/user-plays/'), state.track, 'POST')\r\n            .finally(() => {\r\n              setRequestInProgress(false);\r\n            });\r\n        }\r\n      }}\r\n      play={play}\r\n      uris={trackUri ? [trackUri] : []}\r\n    />\r\n  )\r\n}\r\n\r\n// Callback state ^\r\n// export interface State {\r\n//   currentDeviceId: string;\r\n//   deviceId: string;\r\n//   devices: SpotifyDevice[];\r\n//   error: string;\r\n//   errorType: string;\r\n//   isActive: boolean;\r\n//   isInitializing: boolean;\r\n//   isMagnified: boolean;\r\n//   isPlaying: boolean;\r\n//   isSaved: boolean;\r\n//   isUnsupported: boolean;\r\n//   needsUpdate: boolean;\r\n//   nextTracks: WebPlaybackTrack[];\r\n//   playerPosition: 'bottom' | 'top';\r\n//   position: number;\r\n//   previousTracks: WebPlaybackTrack[];\r\n//   progressMs: number;\r\n//   status: string;\r\n//   track: SpotifyPlayerTrack;\r\n//   volume: number;\r\n// }","import { createUrl, fetch } from '../util/utils';\r\nimport { useCallback, useEffect, useState } from \"react\"\r\n\r\nexport default function useFetch(endpoint, obj = {}, method = 'GET', dependencies = []) {\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState()\r\n  const [value, setValue] = useState()\r\n\r\n  const callbackMemoized = useCallback(() => {\r\n    setLoading(true);\r\n    setError(undefined);\r\n    setValue(undefined);\r\n    fetch(createUrl(endpoint), obj, method)\r\n      .then(setValue)\r\n      .catch(setError)\r\n      .finally(() => setLoading(false));\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, dependencies);\r\n\r\n  useEffect(() => {\r\n    callbackMemoized();\r\n  }, [callbackMemoized]);\r\n\r\n  return { loading, error, value, setValue }\r\n}","import React from 'react'\r\nimport { RingLoader } from 'react-spinners';\r\nimport { css } from \"@emotion/react\";\r\n\r\nconst loaderCss = css\r\n`position: fixed;\r\ntop: 50%;\r\nleft: 50%;\r\ntransform: translate(-50%, -50%);`;\r\n\r\nexport default function Loader() {\r\n  return <RingLoader css={loaderCss} size={100} />;\r\n}\r\n","import * as React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Avatar from \"@mui/material/Avatar\";\r\nimport List from \"@mui/material/List\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ToggleButton from \"@mui/material/ToggleButton\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { fetch, createUrl } from \"../../util/utils\";\r\nimport Loader from \"../../Loader\";\r\n\r\nfunction ToggleBtn({ playlist, track }) {\r\n  const [selected, setSelected] = React.useState(false);\r\n\r\n  const toggleItem = () => {\r\n    const select = !selected;\r\n    fetch(\r\n      createUrl(`playlist/${select ? \"add\" : \"remove\"}-song`),\r\n      { playlistId: playlist.id, track: track },\r\n      'POST'\r\n    ).then(() => setSelected(select));\r\n  };\r\n\r\n  return (\r\n    <ListItem>\r\n      <ToggleButton\r\n        onClick={toggleItem}\r\n        key={playlist.id}\r\n        value=\"check\"\r\n        selected={selected}\r\n        style={{ width: \"100%\" }}\r\n      >\r\n        <ListItemAvatar>\r\n          <Avatar>{playlist.name.charAt(0).toUpperCase()}</Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary={playlist.name} />\r\n      </ToggleButton>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nfunction SimpleDialog(props) {\r\n  const { loading, error, value } = useFetch(`playlist/current-user`);\r\n  const { onClose, selectedValue, open, track } = props;\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  if (loading || error) return <Loader />;\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open}>\r\n      <DialogTitle>Add to playlist</DialogTitle>\r\n      <List sx={{ pt: 0 }}>\r\n        {value.playlists.map((playlist, i) => (\r\n          <ToggleBtn playlist={playlist} track={track} key={i} />\r\n        ))}\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  selectedValue: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default function AddToPlaylistDialog({ track }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [selectedValue, setSelectedValue] = React.useState({});\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (value) => {\r\n    setOpen(false);\r\n    setSelectedValue(value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SimpleDialog\r\n        selectedValue={selectedValue}\r\n        open={open}\r\n        onClose={handleClose}\r\n        track={track}\r\n      />\r\n      <IconButton onClick={handleClickOpen}>\r\n        <AddIcon />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\"\nimport AddToPlaylistDialog from \"./pages/playlist/AddToPlaylistDialog\";\n\nexport default function TrackSearchResult({ track, chooseTrack }) {\n  function handlePlay() {\n    if (chooseTrack) chooseTrack(track);\n    document.dispatchEvent(new CustomEvent('play-track', { detail: { song: track } }));\n  }\n\n  return (\n    <div className=\"row\">\n      <div\n        className=\"d-flex m-2 align-items-center col-10\"\n        style={{ cursor: \"pointer\" }}\n        onClick={handlePlay}\n      >\n        <img src={track.albumUrl} style={{ height: \"64px\", width: \"64px\" }} alt=\"album\" />\n        <div className=\"ml-3\">\n          <div>{track.title}</div>\n          <div className=\"text-muted\">{track.artist}</div>\n        </div>\n      </div>\n      <div className=\"col\">\n        <AddToPlaylistDialog track={track}/>\n      </div>\n\n    </div>\n  )\n}\n","import * as React from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Drawer from \"@mui/material/Drawer\";\r\nimport AppBar from \"@mui/material/AppBar\";\r\nimport CssBaseline from \"@mui/material/CssBaseline\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport List from \"@mui/material/List\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport LibraryMusicIcon from \"@mui/icons-material/LibraryMusic\";\r\nimport MusicNoteIcon from \"@mui/icons-material/MusicNote\";\r\nimport HomeIcon from \"@mui/icons-material/Home\";\r\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\r\nimport StarIcon from \"@mui/icons-material/Star\";\r\nimport ExitIcon from \"@mui/icons-material/ExitToAppTwoTone\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getUser } from \"../util/utils\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nexport default function SidebarDrawer({ children }) {\r\n  const user = getUser();\r\n  const logout = () => document.dispatchEvent(new CustomEvent('logout'));\r\n\r\n  return (\r\n    <Box sx={{ display: \"flex\" }}>\r\n      <CssBaseline />\r\n      <AppBar\r\n        position=\"fixed\"\r\n        sx={{ zIndex: (theme) => theme.zIndex.drawer + 1 }}\r\n      >\r\n        <Toolbar>\r\n          <Link to=\"/\">\r\n            <Typography variant=\"h6\" noWrap component=\"div\">\r\n              DiplomnaMusicApp\r\n            </Typography>\r\n          </Link>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer\r\n        variant=\"permanent\"\r\n        sx={{\r\n          width: drawerWidth,\r\n          flexShrink: 0,\r\n          [`& .MuiDrawer-paper`]: {\r\n            width: drawerWidth,\r\n            boxSizing: \"border-box\",\r\n            height: \"calc(100vh - 100px)\",\r\n          },\r\n        }}\r\n      >\r\n        <Toolbar />\r\n        <Box sx={{ overflow: \"auto\" }}>\r\n          <List>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <AccountCircleIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={user.firstName + \" \" + user.lastName} />\r\n            </ListItem>\r\n\r\n            <Divider />\r\n\r\n            <Link to=\"/\">\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <HomeIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={\"Home\"} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link to=\"/MyPlaylists\">\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <LibraryMusicIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={\"My Playlists\"} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link to=\"/Songs\">\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <MusicNoteIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={\"All Songs\"} />\r\n              </ListItem>\r\n            </Link>\r\n            <Link to=\"/Charts\">\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <StarIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary={\"Charts\"} />\r\n              </ListItem>\r\n            </Link>\r\n\r\n            <Divider />\r\n            \r\n            <ListItem button onClick={logout}>\r\n              <ListItemIcon>\r\n                <ExitIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={\"Logout\"} />\r\n            </ListItem>\r\n          </List>\r\n        </Box>\r\n      </Drawer>\r\n      <Toolbar />\r\n      <Box\r\n        style={{\r\n          height: \"calc(100vh - 100px)\",\r\n          paddingTop: 100,\r\n          paddingLeft: 0,\r\n        }}\r\n        component=\"main\"\r\n        sx={{ flexGrow: 1, p: 3 }}\r\n      >\r\n        {React.Children.map(children, (child) => React.cloneElement(child))}\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { createUrl, fetch } from \"../../util/utils\";\r\nimport Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardActions from '@mui/material/CardActions';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport { red } from '@mui/material/colors';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport ShareIcon from '@mui/icons-material/Share';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\n\r\nexport default function Playlist({ playlist, removePlaylist }) {\r\n  const { name, id, created } = playlist;\r\n  const history = useHistory();\r\n\r\n  const openPlaylist = () => {\r\n    history.push(`/playlist/${id}`);\r\n  };\r\n\r\n  const deletePlaylist = () => {\r\n    fetch(createUrl(`playlist/delete/${id}`)).then(() => removePlaylist(id));\r\n  };\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 345 }} onClick={openPlaylist}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar sx={{ bgcolor: red[500] }} aria-label=\"playlist\">\r\n            {name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={name}\r\n        subheader={new Date(created).toLocaleDateString()}\r\n      />\r\n      {/* <CardMedia\r\n        component=\"img\"\r\n        height=\"194\"\r\n        image=\"/static/images/cards/paella.jpg\"\r\n        alt=\"Paella dish\"\r\n      /> */}\r\n      <CardActions disableSpacing>\r\n        <IconButton aria-label=\"add to favorites\">\r\n          <FavoriteIcon />\r\n        </IconButton>\r\n        <IconButton aria-label=\"share\">\r\n          <ShareIcon />\r\n        </IconButton>\r\n        <IconButton aria-label=\"delete\" onClick={deletePlaylist}>\r\n          <DeleteIcon />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Fab from '@mui/material/Fab';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Loader from \"../../Loader\";\r\nimport Playlist from \"./Playlist\";\r\nimport { createUrl, fetch } from \"../../util/utils\";\r\n\r\nimport Button from '@mui/material/Button';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport TextField from '@mui/material/TextField';\r\nimport DialogContent from '@mui/material/DialogContent';\r\n\r\nexport function NewPlaylist(props) {\r\n  const { open, setOpen, addPlaylist } = props;\r\n\r\n  const saveNewPlaylist = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const name = form.querySelector('#playlistName').value;\r\n    const response = await fetch(createUrl(`playlist/create?name=${name}`));\r\n    if (response.playlist) addPlaylist(response.playlist);\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} >\r\n      <DialogTitle className=\"mb-2 d-flex justify-content-center\">New Playlist</DialogTitle>\r\n      <DialogContent style={{ width: 500 }}>\r\n        <form onSubmit={saveNewPlaylist}>\r\n          <div className=\"p-2\" style={{position: 'relative', top: '-15px'}}>\r\n              <TextField margin=\"normal\" required fullWidth id=\"playlistName\" label=\"Playlist Name\" autoFocus />\r\n          </div>\r\n\r\n          <div className=\"mb-2 d-flex justify-content-center\">\r\n            <Button type=\"button\" className=\"mr-2\" onClick={() => setOpen(false)} variant=\"outlined\">Cancel</Button>\r\n            <Button type=\"submit\" variant=\"contained\">Create Playlist</Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default function MyPlaylists() {\r\n  const { loading, error, value, setValue } = useFetch(\"playlist/current-user\");\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const createPlaylist = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const addPlaylist = (playlist) => {\r\n    setValue({ playlists: [...value.playlists, playlist] });\r\n  };\r\n\r\n  const removePlaylist = (id) => {\r\n    const playlists = value.playlists.filter((playlist) => playlist.id !== id);\r\n    setValue({ playlists });\r\n  };\r\n\r\n  if (loading) return <Loader />;\r\n  if (!value || error) return <h1>Error</h1>;\r\n\r\n  return (\r\n    <div>\r\n      {open && <NewPlaylist open={open} setOpen={setOpen} addPlaylist={addPlaylist} />}\r\n\r\n      <h1 className=\"pb-4\">Your playlists</h1>\r\n\r\n      {value.playlists?.length ? (\r\n        <div className=\"row\">\r\n          {value.playlists.map((playlist, index) => (\r\n            <div className=\"col-12 col-md-6 col-lg-4 mb-4\" key={index}>\r\n              <Playlist playlist={playlist} removePlaylist={removePlaylist} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div>No Playlists</div>\r\n      )}\r\n\r\n      <Fab onClick={createPlaylist} color=\"primary\" variant=\"extended\" style={{ position: 'absolute', right: 35, bottom: 110 }} aria-label=\"add\">\r\n        <AddIcon />\r\n        <span className=\"pl-1\">Create playlist</span>\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction randomRGB() {\r\n  return `rgb(${Math.random() * 255},${Math.random() * 255},${Math.random() * 255})`;\r\n}\r\n\r\nfunction Genre({ genre }) {\r\n  const history = useHistory();\r\n\r\n  const openGenre = () => {\r\n    history.push(`/Genres/${genre}`);\r\n  };\r\n\r\n  const style = {\r\n    height: 100,\r\n    backgroundColor: randomRGB(),\r\n    alignContent: \"center\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginBottom: 20,\r\n    cursor: 'pointer',\r\n  };\r\n  return (\r\n    <div className=\"col-6\" onClick={openGenre}>\r\n      <div className=\"d-flex\" style={style}>\r\n        <span style={{ fontSize: 30, color: \"white\" }}>{genre}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Genres({ genres }) {\r\n  return (\r\n    <div className=\"row\">\r\n      {genres.map((genre) => (\r\n        <Genre genre={genre} key={genre} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { spotifyApi } from '../../Dashboard';\r\nimport Genres from './Genres';\r\nimport Loader from '../../Loader';\r\n\r\nexport default function Songs() {\r\n  const [genres, setGenres] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    spotifyApi.getAvailableGenreSeeds()\r\n    .then((data) => {\r\n      setGenres(data.body.genres);\r\n    });\r\n  }, []);\r\n\r\n  if (!genres) return <Loader />;\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"pb-4\">Genres</h1>\r\n      <Genres genres={genres} />\r\n    </div>\r\n  )\r\n};\r\n","import React from \"react\";\r\nimport { spotifyApi } from \"../../Dashboard\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Loader from \"../../Loader\";\r\nimport TrackSearchResult from \"../../TrackSearchResult\";\r\n\r\nexport default function GenreDetails() {\r\n  const [tracks, setTracks] = React.useState([]);\r\n  const { genre } = useParams();\r\n\r\n  const playTrack = (song) => {\r\n    document.dispatchEvent(new CustomEvent('play-track', { detail: { song } }));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    spotifyApi\r\n      .searchTracks(`genre:${genre}`)\r\n      .then((data) => {\r\n        setTracks(data.body.tracks.items)\r\n      });\r\n  }, [genre]);\r\n\r\n  if (!tracks.length) return <Loader />;\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"pb-4\">Genre {genre}</h1>\r\n      {tracks.map((track) => {\r\n        const smallestAlbumImage = track.album.images.reduce(\r\n          (smallest, image) => {\r\n            if (image.height < smallest.height) return image;\r\n            return smallest;\r\n          },\r\n          track.album.images[0]\r\n        );\r\n\r\n        const song = {\r\n          artist: track.artists[0].name,\r\n          title: track.name,\r\n          uri: track.uri,\r\n          albumUrl: smallestAlbumImage.url,\r\n        };\r\n        return <TrackSearchResult track={song} chooseTrack={() => playTrack(track)}  />\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Loader from \"../../Loader\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport TrackSearchResult from \"../../TrackSearchResult\";\r\n\r\nexport default function PlaylistDetails() {\r\n  const { id } = useParams();\r\n  const { loading, error, value } = useFetch(`playlist/${id}`);\r\n\r\n  if (loading) return <Loader />;\r\n  if (error) return <div>Failed to load component.</div>;\r\n\r\n  return (\r\n    <div>\r\n      {value.songs && value.songs.length ? (\r\n        value.songs.map((song) => <TrackSearchResult track={song} />)\r\n      ) : (\r\n        <h1>No songs in playlist.</h1>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst blockStyle = {\r\n  height: \"55vh\",\r\n  display: \"flex\",\r\n  alignContent: \"center\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  padding: 30,\r\n  marginBottom: 20,\r\n  cursor: \"pointer\",\r\n};\r\n\r\nconst textStyle = {\r\n  transform: \"rotate(-45deg)\",\r\n  color: \"#fff\",\r\n  fontSize: 50,\r\n};\r\n\r\nexport default function Charts() {\r\n  return (\r\n    <div>\r\n      <div className=\"heading\">\r\n        <h1 className=\"pb-4\">Top 100 Songs</h1>\r\n      </div>\r\n\r\n      <div className=\"row \">\r\n        <Link\r\n          to=\"/Charts/weekly\"\r\n          className=\"col-3\"\r\n          style={{ ...blockStyle, backgroundColor: \"#b32642\" }}\r\n        >\r\n          <span style={textStyle}>WEEKLY</span>\r\n        </Link>\r\n        <Link\r\n          to=\"/Charts/monthly\"\r\n          className=\"col-3 offset-1\"\r\n          style={{ ...blockStyle, backgroundColor: \"#2caea4\" }}\r\n        >\r\n          <span style={textStyle}>MONTHLY</span>\r\n        </Link>\r\n        <Link\r\n          to=\"/Charts/yearly\"\r\n          className=\"col-3 offset-1\"\r\n          style={{ ...blockStyle, backgroundColor: \"#84ca99\" }}\r\n        >\r\n          <span style={textStyle}>YEARLY</span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport React from \"react\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Loader from \"../../Loader\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport TrackSearchResult from \"../../TrackSearchResult\";\r\n\r\nexport default function Chart() {\r\n  const { chart } = useParams();\r\n\r\n  const { loading, error, value } = useFetch(`chart/${chart}`);\r\n\r\n  if (loading) return <Loader />;\r\n  if (error) return <div>Failed to load component.</div>;\r\n\r\n  return (\r\n    <div>\r\n      {value.songs && value.songs.length ? (\r\n        value.songs.map((song) => <TrackSearchResult track={song} />)\r\n      ) : (\r\n        <h1>No songs in playlist.</h1>\r\n      )}\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Button from '@mui/material/Button';\r\nimport Grid from '@mui/material/Grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { getUser } from \"../util/utils\";\r\nimport { spotifyApi } from \"../Dashboard\";\r\n\r\nexport default function Home() {\r\n  const user = getUser();\r\n\r\n  const playSong = () => {\r\n    \r\n    spotifyApi\r\n    .searchTracks('never gonna give you up')\r\n    .then((data) => {\r\n      const song = data.body.tracks.items[0];\r\n      document.dispatchEvent(new CustomEvent('play-track', { detail: { song } }));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-4\">\r\n      <Container className=\"pt-4\" maxWidth=\"md\">\r\n        <Typography\r\n          component=\"h1\"\r\n          variant=\"h2\"\r\n          align=\"center\"\r\n          color=\"textPrimary\"\r\n          gutterBottom\r\n        >\r\n          Welcome, {user.firstName} {user.lastName}\r\n        </Typography>\r\n        <Typography variant=\"h5\" align=\"center\" color=\"textSecondary\" paragraph>\r\n          DiplomnaMusicApp is a music streaming platform using the Spotify API. It provides an interesting set of features including searching for songs, creating playlists, top charts and so much more.\r\n        </Typography>\r\n        <div className=\"pt-3\">\r\n          <Grid container spacing={2} justifyContent=\"center\">\r\n            <Grid item>\r\n              <Button variant=\"contained\" color=\"primary\" onClick={playSong}>\r\n                Play me a song\r\n              </Button>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to=\"/Songs\">\r\n                <Button variant=\"outlined\" color=\"primary\">\r\n                  Check music genres\r\n                </Button>\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\nimport { Switch, Route } from \"react-router-dom\";\nimport { Form } from 'react-bootstrap';\nimport useAuth from './hooks/useAuth';\nimport Player from './Player';\nimport TrackSearchResult from './TrackSearchResult';\nimport SpotifyWebApi from 'spotify-web-api-node';\nimport Drawer from './layout/Drawer';\nimport MyPlaylists from './pages/playlist/MyPlaylists';\nimport Songs from './pages/songs/Songs';\nimport GenreDetails from './pages/songs/GenreDetails';\nimport PlaylistDetails from './pages/playlist/PlaylistDetails';\nimport Charts from './pages/charts/Charts';\nimport Chart from './pages/charts/Chart';\nimport Home from './pages/Home';\n\nexport const spotifyApi = new SpotifyWebApi({\n  clientId: '2736f0fba5bd47febe645ba84dc7fa05',\n});\n\nexport default function Dashboard({ code }) {\n  const accessToken = useAuth(code);\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [playingTrack, setPlayingTrack] = useState();\n  const [message, setMessage] = useState(null);\n\n  document.addEventListener('play-track', (e) => {\n    const { song } = e.detail;\n    setPlayingTrack(song);\n  });\n\n  document.addEventListener('show-message', (e) => {\n    const msg = e.detail.msg;\n    setMessage(msg);\n\n    setTimeout(() => {\n      setMessage(null);\n    }, 4000);\n  })\n\n  function chooseTrack(track) {\n    document.dispatchEvent(new CustomEvent('play-track', { detail: { song: track } }));\n    setSearch('');\n  }\n\n  useEffect(() => {\n    if (!accessToken) return;\n    spotifyApi.setAccessToken(accessToken);\n  }, [accessToken])\n\n  useEffect(() => {\n    if (!search) return setSearchResults([]);\n    if (!accessToken) return;\n\n    let cancel = false\n    spotifyApi.searchTracks(search).then(res => {\n      if (cancel) return;\n      setSearchResults(\n        res.body.tracks.items.map(track => {\n          const smallestAlbumImage = track.album.images.reduce(\n            (smallest, image) => {\n              if (image.height < smallest.height) return image;\n              return smallest;\n            },\n            track.album.images[0]\n          )\n\n          return {\n            artist: track.artists[0].name,\n            title: track.name,\n            uri: track.uri,\n            albumUrl: smallestAlbumImage.url,\n          }\n        })\n      )\n    })\n\n    return () => (cancel = true);\n  }, [search, accessToken]);\n\n  return (\n    <>\n      {message ? message : null}\n      <Drawer>\n        <Switch>\n          <Route path=\"/MyPlaylists\">\n            <MyPlaylists/>\n          </Route>\n          <Route path=\"/playlist/:id\">\n            <PlaylistDetails />\n          </Route>\n          <Route path=\"/Songs\">\n            <Songs/>\n          </Route>\n          <Route path=\"/Genres/:genre\">\n            <GenreDetails />\n          </Route>\n          <Route path=\"/Charts/:chart\">\n            <Chart />\n          </Route>\n          <Route path=\"/Charts\">\n            <Charts />\n          </Route>\n          <Route path=\"/\">\n            <Form.Control\n              type='search'\n              placeholder='Search Songs/Artists'\n              value={search}\n              onChange={e => setSearch(e.target.value)}\n            />\n            {!search && <Home />}\n            <div className='flex-grow-1 my-2'>\n              {searchResults.map(track => (\n                <TrackSearchResult\n                  track={track}\n                  key={track.uri}\n                  chooseTrack={chooseTrack}\n                />\n              ))}\n            </div>\n          </Route>\n        </Switch>\n      </Drawer>\n      <div className=\"d-flex align-items-center\" style={{ position: 'absolule', bottom: 0, height: 100, padding: '0 20px' }}>\n        <Player accessToken={accessToken} trackUri={playingTrack?.uri || playingTrack?.id} />\n      </div>\n    </>\n  )\n}\n","import { useState, useEffect } from \"react\"\nimport { createSpotifyApiUrl, fetch } from '../util/utils';\n\nexport default function useAuth(code) {\n  const [accessToken, setAccessToken] = useState();\n  const [refreshToken, setRefreshToken] = useState();\n  const [expiresIn, setExpiresIn] = useState();\n\n  useEffect(() => {\n    fetch(createSpotifyApiUrl('login'), { code }, 'POST')\n      .then(res => {\n        setAccessToken(res.accessToken);\n        setRefreshToken(res.refreshToken);\n        setExpiresIn(res.expiresIn);\n        window.history.pushState({}, null, \"/\");\n      })\n      .catch(() => {\n        window.location = \"/\"\n      })\n  }, [code])\n\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return\n    const interval = setInterval(() => {\n      fetch(createSpotifyApiUrl('refresh'), { refreshToken }, 'POST')\n        .then(res => {\n          setAccessToken(res.accessToken);\n          setExpiresIn(res.expiresIn);\n        })\n        .catch(() => {\n          window.location = \"/\"\n        })\n    }, (expiresIn - 60) * 1000)\n\n    return () => clearInterval(interval);\n  }, [refreshToken, expiresIn]);\n\n  return accessToken;\n}\n","import * as React from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport { createUrl, fetch, saveAuth } from '../util/utils';\r\nimport Link from '@mui/material/Link';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\n\r\nconst theme = createTheme();\r\n\r\nconst Fields = ({ isSignIn, setIsSignIn, isLogged, setIsLogged }) => {\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        const data = new FormData(event.currentTarget);\r\n\r\n        const user = {\r\n            email: data.get('email'),\r\n            password: data.get('password'),\r\n        };\r\n\r\n        if (!isSignIn) {\r\n            user.firstName = data.get('firstName');\r\n            user.lastName = data.get('lastName');\r\n        }\r\n\r\n        const URL = createUrl(isSignIn ? 'login' : 'register');\r\n\r\n        fetch(URL, user, 'POST')\r\n          .then(saveAuth)\r\n          .then(() => {\r\n            setIsLogged(true);\r\n          })\r\n          .catch(() => {\r\n            setIsLogged(false);\r\n          });\r\n    };\r\n    return (\r\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\r\n          {isSignIn\r\n          ? <>\r\n              <TextField margin=\"normal\" required fullWidth id=\"email\" label=\"Email Address\" name=\"email\" autoComplete=\"email\" autoFocus />\r\n              <TextField margin=\"normal\" required fullWidth name=\"password\" label=\"Password\" type=\"password\" id=\"password\" autoComplete=\"current-password\" /> \r\n            </>\r\n          : <>\r\n              <TextField margin=\"normal\" required fullWidth id=\"firstName\" label=\"First Name\" name=\"firstName\" autoFocus />\r\n              <TextField margin=\"normal\" required fullWidth name=\"lastName\" label=\"Last Name\" type=\"lastName\" id=\"lastName\" /> \r\n              <TextField margin=\"normal\" required fullWidth id=\"email\" label=\"Email Address\" name=\"email\" autoComplete=\"email\" />\r\n              <TextField margin=\"normal\" required fullWidth name=\"password\" label=\"Password\" type=\"password\" id=\"password\" autoComplete=\"current-password\" /> \r\n            </>\r\n          }\r\n\r\n            <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n            >\r\n                {isSignIn ? \"Sign In\" : \"Sign Up\" }\r\n            </Button>\r\n            \r\n            <Grid container>\r\n                <Grid item>\r\n                  <Link style={{cursor: 'pointer'}} onClick={() => setIsSignIn(!isSignIn)} variant=\"body2\">\r\n                    {isSignIn ? `Don't have an account? Sign Up` : 'Take me back to Sign In.'}\r\n                  </Link>\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default function SignIn({isLogged, setIsLogged}) {\r\n  const [isSignIn, setIsSignIn] = React.useState(true);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <Box\r\n          sx={{\r\n            marginTop: 8,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Fields isSignIn={isSignIn} setIsSignIn={setIsSignIn} isLogged={isLogged} setIsLogged={setIsLogged} />\r\n        </Box>\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}","import \"bootstrap/dist/css/bootstrap.min.css\"\nimport * as React from 'react';\nimport Login from \"./Login\"\nimport Dashboard from \"./Dashboard\"\nimport Loader from './Loader';\nimport SignIn from './pages/SignIn';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport useLoggedIn from './hooks/useLoggedIn';\nimport { logout } from \"./util/utils\";\n\nconst code = new URLSearchParams(window.location.search).get(\"code\");\n\nfunction App() {\n  const [isLoading, setIsLoading] = React.useState(true);\n  const loggedIn = useLoggedIn(setIsLoading);\n  const [isLogged, setIsLogged] = React.useState(loggedIn);\n\n  document.addEventListener('logout', () => {\n    logout();\n    setIsLogged(false);\n  });\n\n  React.useEffect(() => {\n    if (loggedIn) setIsLogged(loggedIn);\n  }, [loggedIn]);\n\n  if (isLoading) return <Loader />\n\n  if (!isLogged) return <SignIn isLogged={isLogged} setIsLogged={setIsLogged} />;\n\n  return <Router>\n    {code ? <Dashboard code={code} /> : <Login />}\n  </Router>;\n}\n\nexport default App;\n","import { useState, useEffect } from \"react\"\r\nimport { createUrl, fetch, getToken } from '../util/utils';\r\n\r\nexport default function useLoggedIn(setIsLoading) {\r\n  const token = getToken()\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch(createUrl('session-alive'), { token: token }, 'POST')\r\n      .then(res => {\r\n        setSuccess(res.authenticated);\r\n      })\r\n      .catch(() => setSuccess(false))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  }, [setIsLoading, token]);\r\n\r\n  return success;\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport './style.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}